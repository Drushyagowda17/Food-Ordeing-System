{% extends "base.html" %}

{% block title %}Bill #{{ order.id }} - Smart Food{% endblock %}

{% block content %}
<div class="container">
    <div class="bill-container">
        <div class="bill-header">
            <h1>üçΩÔ∏è Smart Food</h1>
            <h2>Order Invoice</h2>
        </div>
        
        <div class="bill-info">
            <div class="bill-details">
                <h3>Order Details</h3>
                <p><strong>Order ID:</strong> #{{ order.id }}</p>
                <p><strong>Date & Time:</strong> {{ order.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
                <p><strong>Status:</strong> <span class="status-{{ order.status }}">{{ order.status.title() }}</span></p>
            </div>
            
            <div class="customer-details">
                <h3>Customer Information</h3>
                <p><strong>Name:</strong> {{ order.customer.name }}</p>
                <p><strong>Email:</strong> {{ order.customer.email }}</p>
            </div>
        </div>
        
        <div class="bill-items">
            <h3>Order Items</h3>
            <table class="bill-table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Restaurant</th>
                        <th>Type</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.order_items %}
                    <tr>
                        <td>{{ item.dish.name }}</td>
                        <td>{{ item.dish.owner.restaurant_name }}</td>
                        <td>
                            <span class="dish-type {{ 'veg' if item.dish.is_veg else 'non-veg' }}">
                                {{ 'üü¢ Veg' if item.dish.is_veg else 'üî¥ Non-Veg' }}
                            </span>
                        </td>
                        <td>{{ item.quantity }}</td>
                        <td>‚Çπ{{ "%.2f"|format(item.price) }}</td>
                        <td>‚Çπ{{ "%.2f"|format(item.price * item.quantity) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <div class="bill-total">
            <div class="total-row">
                <span class="total-label">Total Amount:</span>
                <span class="total-amount">‚Çπ{{ "%.2f"|format(order.total_price) }}</span>
            </div>
        </div>
        
        <div class="bill-footer">
            <p>Thank you for choosing Smart Food!</p>
            <p>We hope you enjoy your meal.</p>
        </div>
        
        <div class="bill-actions">
            <button onclick="window.print()" class="btn btn-secondary">
                <i class="fas fa-print"></i> Print Bill
            </button>
            <a href="{{ url_for('customer.order_history') }}" class="btn btn-primary">View Order History</a>
            <a href="{{ url_for('menu') }}" class="btn btn-primary">Order Again</a>
        </div>
    </div>
</div>

<style>
@media print {
    .navbar, .footer, .bill-actions {
        display: none !important;
    }
    
    .bill-container {
        box-shadow: none !important;
        margin: 0 !important;
        padding: 20px !important;
    }
    
    body {
        background: white !important;
        color: black !important;
    }
}
</style>
{% endblock %}